(this["webpackJsonpnoobs-aot-dashboard"]=this["webpackJsonpnoobs-aot-dashboard"]||[]).push([[0],{411:function(t,e){},498:function(t,e,a){},545:function(t,e){},547:function(t,e){},557:function(t,e){},559:function(t,e){},586:function(t,e){},587:function(t,e){},592:function(t,e){},594:function(t,e){},601:function(t,e){},620:function(t,e){},638:function(t,e){},639:function(t,e){},784:function(t,e,a){"use strict";a.r(e);a(498);var n=a(1),r=a(13),i=a(16),c=a(17),s=a(18),o=a(0),u=a(191),l=a.n(u),d=a(463),p=a(133),f=a(76),v=a(59),h=a(44),x=a(337),j=a(32),m=a.n(j),b={API_KEY:"8973e2f9f9412a72ff5f0aa377e1f391",WCL_API_BASE_URL:"https://classic.warcraftlogs.com/v1/",API_BASE_URL:"http://1.15.154.218/speedrunadmin/public/api",WCL_BASE_URL:"https://classic.warcraftlogs.com/reports/"},g=a(274),O=a.n(g),I=a(27),y=function(t){Object(c.a)(a,t);var e=Object(s.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var t=this.props.tactics;return Object(I.jsx)(x.a,{rowClassName:function(t){return t.type},size:"small",loading:this.props.loading,dataSource:t,columns:[{title:"ID",dataIndex:"name"},{title:"\u804c\u4e1a",dataIndex:"type",filters:[{text:"\u6218",value:"Warrior"},{text:"\u6cd5",value:"Mage"},{text:"\u672f",value:"Warlock"},{text:"\u730e",value:"Hunter"},{text:"\u8d3c",value:"Rogue"},{text:"\u5fb7",value:"Druid"},{text:"\u7267",value:"Priest"},{text:"\u9a91",value:"Paladin"},{text:"\u8428",value:"Shaman"}],onFilter:function(t,e){return e.type===t}},{title:"\u6784\u9020\u533a",children:[{title:"\u80d6\u5b50+\u8f6f\u6ce5",children:[{title:"\u81f4\u5bc6\u4f24\u5bb3",dataIndex:"dense1"},{title:"\u5e3d\u5b50\u4f24\u5bb3",dataIndex:"hat"}]},{title:"\u7535\u7537\u6b7b\u613f/\u51b2\u52a8",dataIndex:"deathwish1"}]},{title:"\u761f\u75ab\u533a",children:[{title:"\u8bfa\u65af\u6ecb\u8865",dataIndex:"resto",render:function(t,e){return e.resto?"\u6709\u8bc5\u5492\u6ca1\u6ecb\u8865\u6216\u5403\u4e86\u88ab\u53d6\u6d88":"\u6ca1\u95ee\u9898"}},{title:"\u8df3\u821e\u7537\u8fc5\u6377\u978b",dataIndex:"swiftBoot"},{title:"\u5b62\u5b50\u6b7b\u613f/\u51b2\u52a8",dataIndex:"deathwish2"}]},{title:"\u519b\u4e8b\u533a",children:[{title:"\u90aa\u6076\u6b66\u5668\u77f3\u76fe",dataIndex:"stoneShield",render:function(t,e){return e.stoneShield?"1":"0"}},{title:"4DK\u6697\u6297",dataIndex:"darkres"},{title:"4DK\u9c81\u83bd/\u4e71\u821e",dataIndex:"recklessness"},{title:"4DK\u6b7b\u613f/\u51b2\u52a8",dataIndex:"deathwish3"}]},{title:"\u8718\u86db\u533a",children:[{title:"\u81ea\u7136\u6297",dataIndex:"natureres",render:function(t,e){return e.natureres?"\u6709\u81ea\u7136\u6297\u6216\u6ca1\u53d7\u4f24\u5bb3":"\u53ef\u80fd\u6ca1\u6709(\u9700\u590d\u67e5)"}},{title:"\u8718\u86db1\u706b\u7bad\u978b",dataIndex:"rocketBoot"},{title:"\u4f8d\u50e7\u6697\u5438",dataIndex:"darkAbsorb",render:function(t,e){return e.darkAbsorb?"\u6709":"\u6ca1\u6709"}},{title:"\u4f8d\u50e7\u5730\u7cbe\u5de5\u5175",dataIndex:"sapper"}]},{title:"\u4e2d\u5fc3\u533a",children:[{title:"\u51b0\u9f99\u6697\u6297\u5438\u6536",dataIndex:"darkres2",render:function(t,e){return!e.darkres2&&"\u6ca1\u6709"}},{title:"\u51b0\u9f99\u6b7b\u613f",dataIndex:"deathwish4"},{title:"\u8001\u514b\u51b0\u6297",dataIndex:"iceres"},{title:"\u8001\u514b\u6253\u65ad",dataIndex:"interrupt2"}]}],rowKey:"id",pagination:!1})}}]),a}(o.Component),D=y,w=O.a.ExcelFile,S=O.a.ExcelFile.ExcelSheet,k=O.a.ExcelFile.ExcelColumn,E=function(t){Object(c.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=e.call(this,t)).downloadExcel=function(){var t=i.state.report;i.setState({loading:!0});var e=[];e.push(j.actions.report.getBOSSDmg(t)),e.push(j.actions.report.getFight(t)),Promise.all(e).then((function(){j.actions.report.getFightsData(t).then((function(){i.setState({loading:!1})}))}))},i.submit=function(){var t=i.state.report,e=[];i.setState({loading:!0}),e.push(j.actions.report.getBOSSDmg(t)),e.push(j.actions.report.getAlarDebuff(t)),e.push(j.actions.report.getLurkerSpout(t)),e.push(j.actions.report.getKaelFlame(t)),e.push(j.actions.report.getVashjCleave(t)),Promise.all(e).then((function(){e=[],Promise.all(e).then((function(){i.setState({loading:!1})}))}))},i.findTargetIds=function(t,e){return(null===e||void 0===e?void 0:e.enemies).map((function(e){return t.includes(e.guid)&&e.id})).filter((function(t){return!!t}))},i.generateSource=function(){var t=i.props,e=t.bossDmg,a=t.alarDebuff,n=t.lurkerSpout,r=t.kaelFlame,c=t.vashjCleave;return null===e||void 0===e?void 0:e.map((function(t){var e,i,s=parseInt(null===a||void 0===a?void 0:a.filter((function(e){return e===t.id})).length),o=null===n||void 0===n?void 0:n.includes(t.id),u=(null===r||void 0===r||null===(e=r.find((function(e){return e.id===t.id})))||void 0===e?void 0:e.total)||0,l=(null===c||void 0===c||null===(i=c.find((function(e){return e.id===t.id})))||void 0===i?void 0:i.total)||0;return console.log(parseInt(u*b.KAEL_FINE)),{id:t.id,name:t.name,type:t.type,bossDmg:t.total,alarDebuff:s,lurkerSpout:o,kaelFlame:u,vashjCleave:l,final:Number(s*b.ALAR_FINE)+Number(o?b.LURKER_FINE:0)+parseInt(u*b.KAEL_FINE)+(l>0?b.VASHJ_FINE:0)}}))},i.mergeTactics=function(){var t=i.props;return[t.slimeTactics,t.thaddiusTactics,t.fourTactics,t.spiderTactics].reduce((function(t,e){return l.a.zipWith(t,e,(function(t,e){return Object(n.a)(Object(n.a)({},t),e)}))}))},i.state={report:null,loading:!1,manual:[],tactical:!1},i}return Object(i.a)(a,[{key:"render",value:function(){var t=this,e=this.props.fightsData,a=this.mergeTactics(),n=this.state,r=n.tactical,i=n.loading,c=this.generateSource(),s=e,o=[{title:"ID",dataIndex:"name"},{title:"\u804c\u4e1a",dataIndex:"type",filters:[{text:"\u6218",value:"Warrior"},{text:"\u6cd5",value:"Mage"},{text:"\u672f",value:"Warlock"},{text:"\u730e",value:"Hunter"},{text:"\u8d3c",value:"Rogue"},{text:"\u5fb7",value:"Druid"},{text:"\u7267",value:"Priest"},{text:"\u9a91",value:"Paladin"},{text:"\u8428",value:"Shaman"}],onFilter:function(t,e){return e.type===t}},{title:"Boss\u4f24\u5bb3",dataIndex:"bossDmg",sorter:function(t,e){return t.bossDmg-e.bossDmg}},{title:"\u5965\u8e29\u706b\u4e09\u79d2\u4ee5\u4e0a(".concat(b.ALAR_FINE,"G/\u6b21)"),dataIndex:"alarDebuff",render:function(t,e){return e.alarDebuff>0?t+"\u6b21":null}},{title:"\u738b\u5b50\u70c8\u7130\u98ce\u66b4(1000\u4f24\u5bb380G)",dataIndex:"kaelFlame",sorter:function(t,e){return t.kaelFlame-e.kaelFlame}},{title:"\u9c7c\u65af\u62c9\u55b7\u6d8c(".concat(b.LURKER_FINE,"G)"),dataIndex:"lurkerSpout",render:function(t,e){return e.lurkerSpout&&"\u83dc\u903c\u88ab\u55b7\u98de"}},{title:"\u74e6\u65af\u742a\u987a\u5288\u4f24\u5bb3(\u6709\u4f24\u5bb3\u5373".concat(b.VASHJ_FINE,"G)"),dataIndex:"vashjCleave",sorter:function(t,e){return t.vashjCleave-e.vashjCleave}},{title:"\u74e6\u65af\u742a\u8e29\u6bd2\u4e24\u79d2\u4ee5\u4e0a(300G/\u6b21)",dataIndex:"alarDebuff",render:function(t,e){return e.alarDebuff>0?t+"\u6b21":null}},{title:"\u603b\u7f5a\u6b3e",dataIndex:"final",sorter:function(t,e){return t.final-e.final}}];return Object(I.jsx)(d.a,{title:Object(I.jsxs)(p.a,{type:"flex",gutter:16,children:[Object(I.jsx)(f.a,{children:Object(I.jsx)(v.a,{style:{width:400},placeholder:"\u8bf7\u7c98\u8d34reportID\uff0c\u4f8b\u5982: Jzx9tgnTKvVwAX",onChange:function(e){return t.setState({report:e.target.value})}})}),Object(I.jsx)(f.a,{children:Object(I.jsx)(h.a,{onClick:this.submit,children:"\u63d0\u4ea4"})}),!r&&Object(I.jsx)(f.a,{children:Object(I.jsx)(h.a,{onClick:this.downloadExcel,children:"\u751f\u6210\u4e0b\u8f7d\u94fe\u63a5"})}),s&&Object(I.jsx)(f.a,{children:Object(I.jsx)(w,{element:Object(I.jsx)(h.a,{children:"\u4e0b\u8f7d"}),children:Object(I.jsxs)(S,{data:s,name:"\u539f\u59cb\u6570\u636e",children:[Object(I.jsx)(k,{label:"mark",value:"mark"}),Object(I.jsx)(k,{label:"BattleID",value:"BattleID"}),Object(I.jsx)(k,{label:"BattleName",value:"BattleName"}),Object(I.jsx)(k,{label:"StartTime",value:"StartTime"}),Object(I.jsx)(k,{label:"EndTime",value:"EndTime"}),Object(I.jsx)(k,{label:"class",value:"class"}),Object(I.jsx)(k,{label:"name",value:"name"}),Object(I.jsx)(k,{label:"damage-done",value:"damageDone"}),Object(I.jsx)(k,{label:"healing",value:"healing"})]})})})]}),children:r?Object(I.jsx)(D,{loading:i,tactics:a}):Object(I.jsx)(x.a,{rowClassName:function(t){return t.type},size:"small",loading:i,dataSource:c,columns:o,rowKey:"id",pagination:!1})})}}]),a}(o.Component),L=Object(j.connect)((function(t){return t.report}))(E);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(696);var R=a(25),_=a(15),P=a.n(_),A=a(332),C=a(189),F=a(789),T=a(790),B=a(791),N=(a(697),{path:"/player",routes:[{path:"/",name:"\u9996\u9875",icon:Object(I.jsx)(F.a,{})},{path:"/players",name:"\u961f\u5458\u5217\u8868",icon:Object(I.jsx)(T.a,{})},{path:"/raids",name:"\u6d3b\u52a8\u5217\u8868",icon:Object(I.jsx)(B.a,{})},{path:"/tests",name:"\u8003\u6838\u7ec4\u5217\u8868",icon:Object(I.jsx)(T.a,{})}]}),K=function(t){return Object(I.jsx)(A.a,{menuItemRender:function(t,e){return Object(I.jsx)(j.Link,{to:t.path,children:e})},style:{height:"100vh",border:"1px solid #ddd"},title:"Noobs AOT",route:N,children:Object(I.jsx)(C.a,{content:null===t||void 0===t?void 0:t.content})})},W=a(258),Y=a(37),z=a.n(Y),H=function(){return Object(I.jsx)(K,{content:function(){var t=[{dataIndex:"id",valueType:"indexBorder",width:36},{title:"\u961f\u5458\u540d\u79f0",dataIndex:"name",render:function(t,e){return Object(I.jsx)(j.Link,{to:"/player/".concat(e.id),children:t})}},{title:"\u5fae\u4fe1ID",dataIndex:"wxid",copyable:!0,search:!1},{title:"\u8003\u6838\u72b6\u6001",dataIndex:"appraisalstatus",sorter:function(t,e){return t.appraisalstatus-e.appraisalstatus},valueEnum:{1:{text:"\u6b63\u5f0f\u961f\u5458",status:"Success"},2:{text:"\u8003\u6838\u961f\u5458",status:"Processing"},3:{text:"\u51b7\u51bb\u961f\u5458",status:"Error"}}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",search:!1,sorter:function(t,e){return t.createtime-e.createtime},render:function(t){return z()(1e3*t).format("YYYY-MM-DD HH:mm")}}];return Object(I.jsx)(W.a,{columns:t,rowKey:"id",pagination:{pageSize:25},request:function(){var t=Object(R.a)(P.a.mark((function t(e){var a,r,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.actions.player.fetchAllPlayers(Object(n.a)({page:e.current,limit:e.pageSize},e));case 2:return i=t.sent,t.abrupt("return",{data:null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.playerres,success:1===(null===i||void 0===i?void 0:i.code),total:null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.playercount});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}()})},U=function(){return Object(I.jsx)(K,{content:function(){var t=[{dataIndex:"id",valueType:"indexBorder",width:36},{title:"\u6d3b\u52a8\u540d\u79f0",dataIndex:"name",render:function(t,e){return Object(I.jsx)(j.Link,{to:"/raid/".concat(e.id),children:t})}},{title:"WCL\u5730\u5740",dataIndex:"wclcode",search:!1,renderText:function(t){return t&&!t.includes("NULL")?Object(I.jsx)("a",{href:b.WCL_BASE_URL+t,target:"_blank",rel:"noreferrer",children:t}):""}},{title:"RL\u540d\u79f0",dataIndex:"rlname",search:!1},{title:"\u9635\u8425",dataIndex:"paramfaction_id",valueEnum:{1:{text:"\u8054\u76df",status:"Processing"},2:{text:"\u90e8\u843d",status:"Error"}}},{title:"CD",dataIndex:"paramcd_id",renderText:function(t){return"\u7b2c".concat(t,"CD")}},{title:"\u5b8c\u6210\u72b6\u6001",dataIndex:"finishstatus",valueEnum:{1:{text:"\u5df2\u5b8c\u6210\u8bc4\u5206",status:"Success"},2:{text:"\u5c1a\u672a\u5f00\u59cb",status:"Error"},3:{text:"\u8bc4\u5206\u9636\u6bb5",status:"Processing"}},search:!1},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createtime",search:!1,sorter:function(t,e){return t.createtime-e.createtime},renderText:function(t){return z()(1e3*t).format("YYYY-MM-DD HH:mm")}}];return Object(I.jsx)(W.a,{columns:t,rowKey:"id",pagination:{pageSize:25},request:function(){var t=Object(R.a)(P.a.mark((function t(e){var a,r,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.actions.raid.fetchAllRaids(Object(n.a)({page:e.current,limit:e.pageSize},e));case 2:return i=t.sent,t.abrupt("return",{data:null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.raidres,success:1===(null===i||void 0===i?void 0:i.code),total:null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.raidcount});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}()})},G=a(462),M=a.n(G);function J(t,e,a,n){return e=function(t,e){return Object(u.startsWith)(e,t)?e:t.replace(/\/*$/,"")+"/"+e.replace(/^\/*/,"")}(b.API_BASE_URL,e),M()({method:t,url:e,headers:a,data:n}).then((function(t){return t.status>=200&&t.status<300?t.data:Promise.reject(t)})).catch((function(t){return function(t){var e=t.response.status;if(!(e>=501&&e<=504))return t.response&&t.response.data&&l.a.extend(t.response.data,function(t){var e=t.field_errors||[],a=t.global_errors?t.global_errors.forEach((function(t){return"".concat(t.message)})):[];return t.message&&a.push(t.message),{field_errors:e,global_errors:a}}(t.response.data)),Promise.reject(t);j.actions.routing.push({pathname:"/exception",state:{code:e}})}(t)}))}function V(t){return J("GET",t,null,null)}var q=a(202),$=a.n(q);var X={getPlayerLists:function(t){return V("human/lists?".concat($.a.stringify(t)))},getPlayerList:function(t){return V("human/list?".concat($.a.stringify(t)))},getRaidLists:function(t){return V("raid/lists?".concat($.a.stringify(t)))},getRaidList:function(t){return V("raid/list?".concat($.a.stringify(t)))}},Q={name:"player",initialState:{playersData:null,playerData:null},reducers:{},effects:{fetchAllPlayers:function(){var t=arguments;return Object(R.a)(P.a.mark((function e(){var a,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:{page:1,limit:25},e.prev=1,e.next=4,X.getPlayerLists(a);case 4:return r=e.sent,j.actions.player.save({playersData:null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.playerres}),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),j.actions.player.save({playersData:[]}),e.abrupt("return",Promise.reject(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},fetchPlayer:function(t){return Object(R.a)(P.a.mark((function e(){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.getPlayerList(t);case 3:return n=e.sent,j.actions.player.save({playerData:null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),j.actions.player.save({playerData:{}}),e.abrupt("return",Promise.reject(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}},Z={name:"raid",initialState:{raidsData:null,raidsCount:0,raidData:null},reducers:{},effects:{fetchAllRaids:function(t){return Object(R.a)(P.a.mark((function e(){var a,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.getRaidLists(t);case 3:return r=e.sent,j.actions.raid.save({raidsData:null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.raidres,raidsCount:null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.raidcount}),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),j.actions.raid.save({raidsData:[]}),e.abrupt("return",Promise.reject(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchRaid:function(t){return Object(R.a)(P.a.mark((function e(){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.getRaidList(t);case 3:return n=e.sent,j.actions.raid.save({raidData:null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),j.actions.raid.save({raidData:{}}),e.abrupt("return",Promise.reject(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}};function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.reducers,a=t.initialState;return t.reducers=Object(n.a)({resetState:function(){return a},save:function(t,e){return Object(n.a)(Object(n.a)({},t),e)}},e),t}var et=function(t){t.model(tt(Q)),t.model(tt(Z))};a(782);et(m.a),Object(j.render)(Object(I.jsx)(j.Router,{children:Object(I.jsxs)(j.Switch,{children:[Object(I.jsx)(j.Redirect,{exact:!0,from:"/",to:"/players"}),Object(I.jsx)(j.Redirect,{exact:!0,from:"/veryrich",to:"/players"}),Object(I.jsx)(j.Route,{path:"/wcl",component:L}),Object(I.jsx)(j.Route,{path:"/players",component:H}),Object(I.jsx)(j.Route,{exact:!0,path:"/player/:playerId",component:H}),Object(I.jsx)(j.Route,{exact:!0,path:"/raids",component:U}),Object(I.jsx)(j.Route,{exact:!0,path:"/raid/:raidId",component:U})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[784,1,2]]]);
//# sourceMappingURL=main.714f2870.chunk.js.map